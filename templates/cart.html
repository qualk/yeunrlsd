{% extends 'partials/layout.html' %}

{% set back_hidden = false %}
{% set back_onclick = "window.location.href='/'" %}
{% set cart_onclick = "window.location.href='/'" %}

{% block title %}Cart - [yeunrlsd]{% endblock %}

{% block description %}Your shopping cart{% endblock %}

{% block extra_head %}
<!-- Datastar client is included globally in layout.html -->
{% endblock %}

{% block main %}
<div class="cart-sidebar open" style="position: static; transform: none; width: 100%; max-width: none;" role="dialog" aria-modal="true" aria-label="Shopping cart">
    <div class="cart-content">
        <div class="cart-items" aria-live="polite">
            {% for item in cart %}
            <div class="cart-item" role="listitem">
                <img src="{{ item.image }}" alt="{{ item.name }}" class="cart-item-image">
                <div class="cart-item-details">
                    <div>
                        <p class="cart-item-name">{{ item.id.split('-')[:2]|join('-')|upper }}</p>
                        <p class="cart-item-price">${{ item.price }}</p>
                        <p class="cart-item-size">SIZE: {{ ['S-M', 'M-L', 'XL-XXL'][item.size] }}</p>
                        <p class="cart-item-qty">QTY: {{ item.quantity }}</p>
                    </div>
                    <div class="quantity-controls" role="group" aria-label="Quantity controls">
                        <button class="quantity-btn" onclick="updateCartQuantity('{{ item.id }}', '{{ item.size }}', -1)" aria-label="Decrease quantity for {{ item.name }}">&minus;</button>
                        <span>{{ item.quantity }}</span>
                        <button class="quantity-btn" onclick="updateCartQuantity('{{ item.id }}', '{{ item.size }}', 1)" aria-label="Increase quantity for {{ item.name }}">+</button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total</span>
                <span id="cart-total">${{ total }}</span>
            </div>
            <p class="cart-note">TAX AND SHIPPING NOT INCLUDED</p>
            <a href="https://www.yeezy.com" target="_blank" class="checkout-btn" aria-label="Continue to checkout">
                CONTINUE
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </a>
        </div>
    </div>
</div>
{% endblock %}